import tkinter
import tkinter.font

from urllib import request

app=tkinter.Tk()

app.title("DoS攻撃テストツール")
app.geometry("1600x900")
fontStyle=tkinter.font.Font(size="20")

#ラベル
urlLabel=tkinter.Label(
    text="リクエストを送りたいURLを入力してください。",
    font=fontStyle
)
urlLabel.pack()

#入力ボックス
urlEntry=tkinter.Entry()
urlEntry.pack()

#ラベル
numberLabel=tkinter.Label(
    text="\nリクエストを送りたい回数を入力してください。",
    font=fontStyle
)
numberLabel.pack()

#入力ボックス
numberEntry=tkinter.Entry()
numberEntry.pack()

def pentest(a):
    url=urlEntry.get()
    number=int(numberEntry.get())
    n=0

    runLabel=tkinter.Label(
        text="実行しています。",
        font=fontStyle
    )
    runLabel.pack()
    
    for i in range(number):
        if i==0:
            statusCode=tkinter.Label(text="HTTPステータスコード:"+str(request.urlopen(url).getcode()))
            statusCode.pack()

            if request.urlopen(url).getcode()!=200:
                errorLabel=tkinter.Label(
                    text="エラーが発生しました。",
                    font=fontStyle
                )
                errorLabel.pack()
                break

        request.urlopen(url)
        n+=1
    
    if n==number:
        finishLabel=tkinter.Label(
            text=str(n)+"回のリクエストが正常に終了しました。\n",
            font=fontStyle
        )
        finishLabel.pack()

button=tkinter.Button(
    text="実行",
    font=fontStyle
)
button.pack(pady=20)
button.bind("<Button-1>", pentest)

app.mainloop()
